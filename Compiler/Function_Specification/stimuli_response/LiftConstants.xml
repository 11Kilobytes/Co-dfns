<?xml version="1.0" encoding="utf-8" ?>

<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>Lift Constants</title>
  <para>
    The <function>Lift Constants</function> component takes in the AST delivered by 
    <function>DropUnreached</function> and converts constant array expression literals 
    into variable references and lifts those literals into top-level definitions that 
    occur at the top of the AST.
  </para>
  <table frame="void" rules="rows">
    <caption>Stimuli for LiftConstants</caption>
    <thead>
      <tr>
        <th>Symbol</th>
        <th colspan="2">Name</th>
        <th colspan="4">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>L</td>
        <td colspan="2">Literal Expression</td>
        <td colspan="4">
          Some literal atomic expression such as an array of numbers or a string
        </td>
      </tr>
      <tr>
        <td>O</td>
        <td colspan="2">Some Other node</td>
        <td colspan="4">
          Any other node
        </td>
      </tr>
    </tbody>
  </table>
  <para>
    The set of responses is very simple, consisting of a pair of responses 
    for two streams, the first being the normal stream, and the second 
    being the head stream to prepend to the normal stream at the end.
  </para>
  <table frame="void" rules="rows">
    <caption>Responses for LiftConstants</caption>
    <thead>
      <tr>
        <th>Symbol</th>
        <th colspan="4">Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Prepend</td>
        <td colspan="4">Prepend the head stream to the normal stream</td>
      </tr>
      <tr>
        <td>Gensym</td>
        <td colspan="4">Generate a new variable node</td>
      </tr>
      <tr>
        <td>Bind</td>
        <td colspan="4">A new bound node containing the current node</td>
      </tr>
      <tr>
        <td>Id</td>
        <td colspan="4">
          A pass through node, representing the current node 
          in question.
        </td>
      </tr>
    </tbody>
  </table>
</section>