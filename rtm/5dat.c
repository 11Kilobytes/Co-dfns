V coal(A&a){
 VSWITCH(a.v,,,
  B c=cnt(a);I can=1;
  DOB(c,A&b=v[i];
   coal(b);if(rnk(b))can=0;CVSWITCH(b.v,can=0,,can=0)
   if(!can)break)
  if(can){dtype tp=mxt(b8,a);arr nv(c,tp);
   const wchar_t*msg=L"Unexpected non-simple array type.";
   DOB(c,CVSWITCH(v[i].v,err(99,msg),nv((I)i)=v(0).as(tp),err(99,msg)))
   a.v=nv;})}
